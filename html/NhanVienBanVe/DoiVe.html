<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Hướng dẫn sử dụng hệ thống bán vé tàu</title>
    <link rel="stylesheet" href="../../css/style.css"> 
</head>
<body>

<div class="container">
    <div class="sidebar" id="sidebar-placeholder"></div>

    <div class="content">
        <h2>Hướng dẫn đổi vé</h2>
        <div class="section-block" id="tim-kiem-ve-doi" style="margin-bottom: 0;">
            <h3>Tìm kiếm vé cần đổi</h3>
            <img src="../../img/mh_NhanVienBanVe/thututimkiem.png" alt="Giao diện tìm kiếm vé">
            
            <p>Phần tìm kiếm được chia làm <b>2 khu vực riêng biệt</b> (tương ứng với 2 hàng trên màn hình):</p>

            <div style="background-color: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin-bottom: 15px;">
                <h4 style="margin-top: 0; color: #007bff;">1. Hàng trên: Tìm kiếm Chính</h4>
                <p>Dùng để xác định vé hoặc khách hàng cụ thể. Bao gồm 3 tiêu chí:</p>
                <ul>
                    <li><b>Mã vé:</b> Tìm chính xác một vé cụ thể.</li>
                    <li><b>Mã hóa đơn:</b> Tìm toàn bộ vé trong cùng một đơn hàng (cùng chuyến tàu).</li>
                    <li><b>SĐT / CCCD:</b> Tìm lịch sử đặt vé của khách hàng (có thể ra nhiều chuyến tàu khác nhau).</li>
                </ul>
                <p><i>&rarr; Sau khi chọn tiêu chí và nhập thông tin, nhấn nút <b>"Tìm"</b> màu xanh để hiển thị kết quả.</i></p>
            </div>

            <div style="background-color: #f8f9fa; padding: 15px; border-left: 4px solid #28a745; margin-bottom: 15px;">
                <h4 style="margin-top: 0; color: #28a745;">2. Hàng dưới: Bộ lọc Bổ sung</h4>
                <p>Dùng để thu hẹp kết quả khi tìm bằng <i>SĐT</i> hoặc <i>CCCD</i>. Nhân viên có thể chọn thêm:</p>
                <ul>
                    <li><b>Ga đi / Ga đến:</b> Lọc theo hành trình.</li>
                    <li><b>Ngày khởi hành:</b> Lọc theo ngày cụ thể.</li>
                </ul>
                <p><i>&rarr; Nhấn nút <b>"Lọc"</b> để áp dụng các điều kiện này. (Có thể nhấn Lọc ngay mà không cần nhấn Tìm nếu đã nhập đủ thông tin).</i></p>
            </div>

            <div style="margin-top: 20px;">
                <p>Mỗi hàng đều có một nút <b>Xóa</b> hoạt động <b>độc lập</b> với nhau:</p>
                <ul>
                    <li><b>Nút Xóa ở hàng trên:</b> Chỉ xóa trắng ô "Nhập thông tin" của phần tìm kiếm chính.</li>
                    <li><b>Nút Xóa ở hàng dưới:</b> Chỉ đưa các ô chọn Ga và Ngày về trạng thái mặc định (trống), không ảnh hưởng đến hàng trên.</li>
                </ul>
                <p><i>Tính năng này giúp nhân viên sửa nhanh thông tin nhập sai ở từng phần mà không phải nhập lại từ đầu toàn bộ.</i></p>
            </div>
        </div>

        <div class="section-block" id="chon-ve-doi" style="margin-top: 0; margin-bottom: 0;">
            <h3>Chọn vé đổi</h3>           
            <img src="../../img/mh_NhanVienBanVe/cactrangthaive.png" alt="Các trạng thái vé">
            <p style="text-indent: 30px;">
                <b>Về trạng thái vé:</b> Hệ thống phân loại vé dựa trên 3 trạng thái hiển thị chính: 
                (1) <b>Màu đỏ:</b> Vé đã thực hiện nghiệp vụ hủy; 
                (2) <b>Màu xanh:</b> Vé đã thanh toán thành công và còn đủ điều kiện đổi (trước giờ khởi hành tối thiểu 24 giờ); 
                (3) <b>Màu xám:</b> Vé không đủ điều kiện thực hiện nghiệp vụ do chuyến tàu đã kết thúc hoặc đã quá hạn đổi theo quy định.
            </p>

                <img src="../../img/mh_NhanVienBanVe/locve.png" alt="Hướng dẫn lọc và lược bỏ vé">
            <p style="text-indent: 30px;">
                Khi thực hiện tra cứu theo <b>Số điện thoại</b> hoặc <b>Số căn cước công dân</b>, hệ thống sẽ hiển thị danh sách tất cả các vé liên quan, có thể bao gồm nhiều chuyến tàu khác nhau. 
                Để tối ưu hóa danh sách trước khi thực hiện nghiệp vụ đổi tập thể, nhân viên có thể thao tác như sau:
            </p>
            <ul style="margin-left: 50px;">
                <li>
                    <b>Lược bỏ vé đơn lẻ:</b> Nhấn vào nút <b>X</b> màu đỏ ở góc phải trên cùng của từng thẻ vé để loại bỏ những vé không có nhu cầu thay đổi ra khỏi danh sách hiển thị tạm thời.
                </li>
                <li>
                    <b>Sử dụng bộ lọc chuyến tàu:</b> Sử dụng chức năng <b>Lọc</b> (Ga đi, Ga đến, Ngày khởi hành) ở hàng công cụ thứ hai để thu hẹp danh sách về cùng một chuyến tàu cụ thể. 
                </li>
            </ul>
            <p style="text-indent: 30px;">
                Việc tinh lọc này giúp đảm bảo danh sách hiển thị chỉ còn các vé <b>cùng chung một chuyến tàu</b>, từ đó cho phép nhân viên sử dụng nút <b>"Đổi toàn bộ"</b> một cách hợp lệ mà không bị hệ thống từ chối do xung đột dữ liệu chuyến.
            </p>

            <img src="../../img/mh_NhanVienBanVe/bamdoive.png" alt="Hướng dẫn lọc và lược bỏ vé">
            <p style="text-indent: 30px; ">
                    <b>Về hình thức đổi vé:</b> Nhân viên có thể thực hiện <b>Đổi vé đơn</b> (sử dụng nút "Đổi vé" trên từng thẻ vé) hoặc <b>Đổi vé tập thể</b> (sử dụng nút "Đổi toàn bộ") và chọn xác nhận
                    để chuyển đến <a href="#doivebandau">màn hình xử lý chọn chỗ mới</a>. 
                    Lưu ý: Đối với hình thức đổi tập thể, tất cả các vé được chọn bắt buộc phải thuộc <b>cùng một chuyến tàu</b>. 
                    Trong trường hợp các vé không đồng nhất về mã chuyến, hệ thống sẽ từ chối thao tác và hiển thị thông báo lỗi để đảm bảo tính toàn vẹn dữ liệu.
            </p>
        </div>

        <div class="section-block" id="chon-cho-moi" style="margin-top: 0; margin-bottom: 0;">
            <h3>3. Chọn chuyến tàu và chỗ mới</h3>
            
            <img src="../../img/mh_NhanVienBanVe/doivebandau.png" id="doivebandau" alt="Giao diện ban đầu khi đổi vé" style="max-width: 100%; border: 1px solid #ddd; margin-bottom: 15px;">
            
            <p style="text-indent: 30px;">
                Tại giao diện ban đầu, hệ thống sẽ tự động hiển thị danh sách các khách hàng cần đổi vé ở cột bên phải (bao gồm thông tin vé cũ). 
                Nhân viên tiến hành nhập thông tin <b>Ga đi, Ga đến</b> và <b>Ngày khởi hành</b> mong muốn, sau đó nhấn nút <b>"Tìm chuyến"</b>.
            </p>

            <img src="../../img/mh_NhanVienBanVe/doivesaukhichontoa.png" alt="Giao diện chọn chỗ ngồi" style="max-width: 100%; border: 1px solid #ddd; margin-bottom: 15px;">
            
            <p style="text-indent: 30px;">
                Sau khi danh sách chuyến tàu hiện ra, quy trình chọn chỗ diễn ra theo trình tự sau:
            </p>
            
            <ul style="margin-left: 50px; margin-bottom: 20px;">
                <li>
                    <b>Bước 1 - Chọn toa:</b> Nhấn vào chuyến tàu phù hợp, sau đó chọn toa tàu trên thanh danh sách toa để hiển thị sơ đồ ghế.
                </li>
                <li>
                    <b>Bước 2 - Chọn ghế:</b> Nhấn chọn vào các ghế có trạng thái Trống (màu trắng). 
                    <br><i>&rarr; Hệ thống sẽ đánh dấu ghế vừa chọn sang màu xanh (Đang chọn), tự động cập nhật thông tin "Chỗ mới" cho khách hàng hiện tại và tính toán lại giá vé mới.</i>
                </li>
                <li>
                    <b>Bước 3 - Cơ chế tự động:</b> Sau khi chọn xong chỗ cho khách hàng thứ nhất, hệ thống sẽ <b>tự động chuyển lượt chọn</b> sang khách hàng tiếp theo trong danh sách. Nhân viên tiếp tục chọn ghế cho đến khi tất cả khách hàng đều đã có chỗ mới.
                </li>
                <li>
                    <b>Bước 4 - Điều chỉnh (Nếu cần):</b> Để chọn lại chỗ cho một khách hàng cụ thể, nhân viên nhấn vào <b>nút tròn (Radio button)</b> trước tên khách hàng đó. Lúc này, ghế đang chọn của họ sẽ sáng màu xanh để nhận biết, nhân viên có thể chọn một ghế khác thay thế.
                </li>
                <li>
                    <b>Bước 5 - Hoàn tất:</b> Nhấn nút <b>"Xác nhận đổi"</b> (màu xanh lá) ở góc dưới cùng bên phải để kết thúc quá trình chọn chỗ. Hệ thống sẽ tự động chuyển sang <a href="#da-xac-nhan-doi-ve">màn hình thanh toán</a>.
                </li>
            </ul>

            <div style="background-color: #fff3cd; border-left: 5px solid #ffc107; padding: 10px 15px; margin-top: 10px;">
                <b>⚠️ Lưu ý quan trọng :</b>
                <p style="margin: 5px 0 0 0;">
                    Trong một phiên giao dịch đổi vé tập thể, tất cả các vé mới bắt buộc phải thuộc <b>CÙNG MỘT CHUYẾN TÀU</b>. 
                    Nếu nhân viên cố tình chọn chuyến tàu khác khi chưa hoàn tất việc đổi vé cho toàn bộ danh sách, hệ thống sẽ hiển thị thông báo lỗi và ngăn chặn thao tác.
                </p>
            </div>
        </div>

        <div class="section-block" id="xac-nhan-thanh-toan" style="margin-top: 0; margin-bottom: 0;">
            <h3>Xác nhận thanh toán</h3>
            <img src="../../img/mh_NhanVienBanVe/daxacnhandoive.png" id="da-xac-nhan-doi-ve" alt="Giao diện xác nhận thanh toán đổi vé" style="max-width: 100%; border: 1px solid #ddd; margin-bottom: 15px;">
    
            <p style="text-indent: 30px;">
                Đây là bước cuối cùng để hoàn tất giao dịch. Giao diện được chia thành 2 khu vực chính: <b>Bảng kê chi tiết</b> (bên trái) và <b>Hóa đơn dự kiến</b> (bên phải). Quy trình thực hiện như sau:
            </p>

            <ul style="margin-left: 50px;">
                <li>
                    <b>Bước 1 - Kiểm tra thông tin:</b> Nhân viên rà soát lại mục <b>Thông tin vé mới</b> và <b>Chi tiết đổi chỗ</b> (bảng so sánh đối chiếu giữa ghế cũ và ghế mới) để đảm bảo chính xác trước khi xuất vé.
                </li>
                <li>
                    <b>Bước 2 - Đối soát chi phí:</b> Tại mục <b>Tổng hợp chi phí</b>, hệ thống sẽ tự động tính toán số tiền chênh lệch:
                    <ul style="margin-top: 5px; margin-bottom: 5px; list-style-type: circle;">
                        <li><i>Khách cần trả thêm:</i> Nếu giá vé mới cao hơn vé cũ.</li>
                        <li><i>Hoàn lại tiền:</i> Nếu giá vé mới thấp hơn vé cũ.</li>
                        <li><i>Không cần thanh toán:</i> Nếu giá trị hai vé ngang bằng nhau (Giao dịch đổi ngang giá).
                    </ul>
                </li>
                <li>
                    <b>Bước 3 - Xác nhận giao dịch:</b> Nhân viên chọn <b>Hình thức thanh toán</b> (Tiền mặt/Chuyển khoản...), sau đó nhấn nút <b>"Xác nhận đổi vé"</b> (màu xanh lá) để lưu giao dịch xuống hệ thống.
                </li>
                <li>
                    <b>Bước 4 - Hoàn tất:</b> Sau khi thông báo "Giao dịch thành công" xuất hiện, chi tiết hóa đơn sẽ được hiển thị đầy đủ ở khung bên phải. Nhấn nút <b>Ok</b> và <b>"Kết thúc"</b> (màu cam) ở góc dưới cùng để kết thúc quá trình đổi vé.
                </li>
            </ul>
        </div>

    </div>
</div>

<script src="../../js/script.js"></script>

</body>
</html>